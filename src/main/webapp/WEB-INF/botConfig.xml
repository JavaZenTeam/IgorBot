<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:util="http://www.springframework.org/schema/util"
       xsi:schemaLocation="
            http://www.springframework.org/schema/beans
            http://www.springframework.org/schema/beans/spring-beans.xsd
            http://www.springframework.org/schema/util
            http://www.springframework.org/schema/util/spring-util.xsd
            ">

    <bean id="randomAnswerModule" class="ru.javazen.telegram.bot.handler.RegexpFilter">
        <property name="pattern" value="Игорь,.*\?"/>
        <property name="innerHandler">
            <bean class="ru.javazen.telegram.bot.handler.RandomAnswer">
                <property name="answers">
                    <map>
                        <entry key="Да" value="4"/>
                        <entry key="Нет" value="4"/>
                        <entry key="Не знаю" value="1"/>
                    </map>
                </property>
            </bean>
        </property>
    </bean>

    <bean id="replyLayoutSwitcherModule" class="ru.javazen.telegram.bot.handler.RegexpFilter">
        <property name="pattern" value="п[оа][- ]?русс?к[ие]"/>
        <property name="innerHandler">
            <bean class="ru.javazen.telegram.bot.handler.ReplyLayoutSwitcher"/>
        </property>
    </bean>

    <util:map id="botMap" key-type="java.lang.String" value-type="ru.javazen.telegram.bot.Bot">

        <entry key="${bot.name}">
            <bean class="ru.javazen.telegram.bot.CompositeBot">
                <constructor-arg name="token" value="${bot.token}"/>
                <property name="updateHandlers">
                    <list>
                        <ref bean="replyLayoutSwitcherModule"/>
                        <ref bean="randomAnswerModule"/>
                    </list>
                </property>
            </bean>
        </entry>

    </util:map>

</beans>