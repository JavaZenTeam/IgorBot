<div xmlns:th="http://www.thymeleaf.org" class="fix-height">
    <table class="table table-bordered table-sm bg-white">
        <thead class="thead-light text-center">
        <tr>
            <th width="8%">#</th>
            <th width="37%">User</th>
            <th width="25%">Activity</th>
            <th width="15%">Messages</th>
            <th width="15%">Characters</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="user, iter : ${topActiveUsers}">
            <td th:text="${iter.index} + 1" class="text-right"></td>
            <td>
                <span th:text="${user.user.firstName}"></span>
                <span th:text="${user.user.lastName}"></span>
            </td>
            <td th:with="activity=${100.0 * user.score / totalScore}, activityStr=${#numbers.formatDecimal(activity, 0, 0)}">
                <div class="progress" style="height: 1.5rem"
                     th:title="${#numbers.formatDecimal(user.score, 0, 0)} + ' points'">
                    <div class="progress-bar" role="progressbar"
                         th:style="'width: ' + ${activityStr} + '%;'">
                        <div th:if="${activity >= 40}"
                             th:text="${activityStr} + '%'"></div>
                    </div>
                    <div th:if="${activity} < 40" class="ml-2 d-flex flex-column justify-content-center"
                         th:text="${activityStr} + '%'"></div>
                </div>
            </td>
            <td th:text="${user.count}" class="text-right"></td>
            <td th:text="${user.length}" class="text-right"></td>
        </tr>
        </tbody>
    </table>
</div>